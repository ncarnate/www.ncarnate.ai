import*as iolet from"../iolet/index.js";export{plugin};let _read_src=function(){throw new Error("need to set read_fn in include.init(read_fn)")};async function plugin(read_fn){_read_src=read_fn,await _flush()}async function _flush(){let d=document,els=Array.from(document.querySelectorAll("include-"));for(;els.length;){for(const el of els){let src=el.getAttribute("src"),content=await _read_src(src);el.insertAdjacentHTML("beforeend",content),iolet.flush(el),iolet.remove_outlets(el),el.outerHTML=el.innerHTML}els=Array.from(document.querySelectorAll("include-"))}}