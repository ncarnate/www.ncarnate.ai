import{walkdown_each}from"./walk.js";export{splitting};function splitting(document){const els=Array.from(document.querySelectorAll("[data-splitting]"));let nodes=[];walkdown_each(els,function(el){nodes=nodes.concat(get_text_nodes(el))}),wrap_text_nodes(nodes,!1);const style=document.createElement("style");style.textContent=`[data-splitting] .word, [data-splitting] .char {display: inline-block;} `+"[data-splitting] .word {white-space: nowrap;} [data-splitting] .char {position: relative;}",document.head.appendChild(style);function get_text_nodes(element){return Array.from(element.childNodes).filter(node=>node.nodeType===3&&node.textContent.trim().length>1)}function wrap_text_nodes(nodes,do_chars){nodes.forEach(node=>{const words=node.textContent.trim().split(/\s+/),word_n=words.length;words.forEach((word,i)=>{const span=document.createElement("span");if(span.setAttribute("class","word"),do_chars){const chars=word.split("");chars.forEach((char)=>{const char_span=document.createElement("span");char_span.setAttribute("class","char"),char_span.innerHTML=char,span.appendChild(char_span)})}else span.innerHTML=word;node.before(span),i+1<word_n&&node.before(document.createTextNode(" "))}),node.remove()})}}