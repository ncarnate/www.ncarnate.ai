/*!
 * TextPlugin 3.12.4
 * https://gsap.com
 *
 * @license Copyright 2008-2023, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/import{emojiSafeSplit,getText,splitInnerHTML}from"./utils/strings.js";let gsap,_tempDiv,_getGSAP=()=>gsap||typeof window!="undefined"&&(gsap=window.gsap)&&gsap.registerPlugin&&gsap;export const TextPlugin={version:"3.12.4",name:"text",init(target,value,tween){typeof value!="object"&&(value={value});let i=target.nodeName.toUpperCase(),data=this,{newClass,oldClass,preserveSpaces,rtl}=value,delimiter=data.delimiter=value.delimiter||"",fillChar=data.fillChar=value.fillChar||(value.padSpace?"&nbsp;":""),short,text,original,j,condensedText,condensedOriginal,aggregate,s;if(data.svg=target.getBBox&&(i==="TEXT"||i==="TSPAN"),!("innerHTML"in target)&&!data.svg)return!1;if(data.target=target,!("value"in value)){data.text=data.original=[""];return}for(original=splitInnerHTML(target,delimiter,!1,preserveSpaces),_tempDiv||(_tempDiv=document.createElement("div")),_tempDiv.innerHTML=value.value,text=splitInnerHTML(_tempDiv,delimiter,!1,preserveSpaces),data.from=tween._from,(data.from||rtl)&&!(rtl&&data.from)&&(i=original,original=text,text=i),data.hasClass=!!(newClass||oldClass),data.newClass=rtl?oldClass:newClass,data.oldClass=rtl?newClass:oldClass,i=original.length-text.length,short=i<0?original:text,i<0&&(i=-i);--i>-1;)short.push(fillChar);if(value.type==="diff"){j=0,condensedText=[],condensedOriginal=[],aggregate="";for(i=0;i<text.length;i++)s=text[i],s===original[i]?aggregate+=s:(condensedText[j]=aggregate+s,condensedOriginal[j++]=aggregate+original[i],aggregate="");text=condensedText,original=condensedOriginal,aggregate&&(text.push(aggregate),original.push(aggregate))}value.speed&&tween.duration(Math.min(.05/value.speed*short.length,value.maxDuration||9999)),data.rtl=rtl,data.original=original,data.text=text,data._props.push("text")},render(ratio,data){ratio>1?ratio=1:ratio<0&&(ratio=0),data.from&&(ratio=1-ratio);let{text,hasClass,newClass,oldClass,delimiter,target,fillChar,original,rtl}=data,l=text.length,i=(rtl?1-ratio:ratio)*l+.5|0,applyNew,applyOld,str;hasClass&&ratio?(applyNew=newClass&&i,applyOld=oldClass&&i!==l,str=(applyNew?"<span class='"+newClass+"'>":"")+text.slice(0,i).join(delimiter)+(applyNew?"</span>":"")+(applyOld?"<span class='"+oldClass+"'>":"")+delimiter+original.slice(i).join(delimiter)+(applyOld?"</span>":"")):str=text.slice(0,i).join(delimiter)+delimiter+original.slice(i).join(delimiter),data.svg?target.textContent=str:target.innerHTML=fillChar==="&nbsp;"&&~str.indexOf("  ")?str.split("  ").join("&nbsp;&nbsp;"):str}};TextPlugin.splitInnerHTML=splitInnerHTML,TextPlugin.emojiSafeSplit=emojiSafeSplit,TextPlugin.getText=getText,_getGSAP()&&gsap.registerPlugin(TextPlugin);export{TextPlugin as default}